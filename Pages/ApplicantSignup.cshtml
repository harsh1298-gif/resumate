@page
@model ResumeProject.Pages.ApplicantSignupModel
@{
    ViewData["Title"] = "Applicant Signup";
}

<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-[#0f172a] to-[#1e293b] p-6">

    <!-- SUCCESS MESSAGE -->
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="fixed top-20 left-1/2 transform -translate-x-1/2 bg-green-900 border border-green-700 text-white p-4 rounded mb-4 z-50 min-w-80 text-center">
            @TempData["SuccessMessage"]
        </div>
    }

    <div class="max-w-md w-full bg-gradient-to-tr from-[#1e2a45] via-[#263660] to-[#1e2a45] rounded-xl shadow-xl p-10 text-white">
        <h2 class="text-4xl font-extrabold mb-8 text-[#fbbf24] select-none border-b border-[#fbbf2450] pb-4">
            @ViewData["Title"]
        </h2>

        <form method="post" enctype="multipart/form-data" novalidate>
            @* Input group with slightly lighter bg for visual separation *@
            <div class="mb-5 bg-[#2c3a68] rounded-md p-4">
                <label asp-for="Input.Email" class="block font-semibold mb-2 text-[#fbbf24]"></label>
                <input asp-for="Input.Email" class="w-full px-4 py-3 rounded-md bg-[#1b2540] border border-[#334060] text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-[#fbbf24]" />
                <span asp-validation-for="Input.Email" class="text-yellow-400 text-sm mt-1 block"></span>
            </div>

            <div class="mb-5 bg-[#2c3a68] rounded-md p-4">
                <label asp-for="Input.Password" class="block font-semibold mb-2 text-[#fbbf24]"></label>
                <input asp-for="Input.Password" type="password" class="w-full px-4 py-3 rounded-md bg-[#1b2540] border border-[#334060] text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-[#fbbf24]" />
                <span asp-validation-for="Input.Password" class="text-yellow-400 text-sm mt-1 block"></span>
            </div>

            <div class="mb-5 bg-[#2c3a68] rounded-md p-4">
                <label asp-for="Input.FullName" class="block font-semibold mb-2 text-[#fbbf24]"></label>
                <input asp-for="Input.FullName" class="w-full px-4 py-3 rounded-md bg-[#1b2540] border border-[#334060] text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-[#fbbf24]" />
                <span asp-validation-for="Input.FullName" class="text-yellow-400 text-sm mt-1 block"></span>
            </div>

            <div class="mb-5 bg-[#2c3a68] rounded-md p-4">
                <label asp-for="Input.DateOfBirth" class="block font-semibold mb-2 text-[#fbbf24]"></label>
                <input asp-for="Input.DateOfBirth" type="date" class="w-full px-4 py-3 rounded-md bg-[#1b2540] border border-[#334060] text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-[#fbbf24]" />
                <span asp-validation-for="Input.DateOfBirth" class="text-yellow-400 text-sm mt-1 block"></span>
            </div>

            <div class="mb-5 bg-[#2c3a68] rounded-md p-4">
                <label asp-for="Input.PhoneNumber" class="block font-semibold mb-2 text-[#fbbf24]"></label>
                <input asp-for="Input.PhoneNumber" class="w-full px-4 py-3 rounded-md bg-[#1b2540] border border-[#334060] text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-[#fbbf24]" />
                <span asp-validation-for="Input.PhoneNumber" class="text-yellow-400 text-sm mt-1 block"></span>
            </div>

            <div class="mb-5 bg-[#2c3a68] rounded-md p-4">
                <label asp-for="Input.Address" class="block font-semibold mb-2 text-[#fbbf24]"></label>
                <input asp-for="Input.Address" class="w-full px-4 py-3 rounded-md bg-[#1b2540] border border-[#334060] text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-[#fbbf24]" />
            </div>

            <div class="mb-5 bg-[#2c3a68] rounded-md p-4">
                <label asp-for="Input.City" class="block font-semibold mb-2 text-[#fbbf24]"></label>
                <input asp-for="Input.City" class="w-full px-4 py-3 rounded-md bg-[#1b2540] border border-[#334060] text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-[#fbbf24]" />
            </div>

            <div class="mb-5 bg-[#2c3a68] rounded-md p-4">
                <label asp-for="Input.Pincode" class="block font-semibold mb-2 text-[#fbbf24]"></label>
                <input asp-for="Input.Pincode" class="w-full px-4 py-3 rounded-md bg-[#1b2540] border border-[#334060] text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-[#fbbf24]" />
            </div>

            <div class="mb-6">
                <label asp-for="Input.ProfilePhoto" class="block font-semibold mb-2 text-[#fbbf24]"></label>
                <input asp-for="Input.ProfilePhoto" type="file" class="w-full text-white" />
            </div>

            <div class="mb-6 flex items-center">
                <input asp-for="Input.TermsAccepted" type="checkbox" class="mr-3 h-5 w-5 accent-[#fbbf24]" />
                <label asp-for="Input.TermsAccepted" class="text-white select-none font-semibold">I accept the terms and conditions</label>
                <span asp-validation-for="Input.TermsAccepted" class="text-yellow-400 text-sm ml-2"></span>
            </div>

            <button type="submit" class="w-full bg-[#fbbf24] text-gray-900 font-bold py-3 rounded-md hover:bg-yellow-400 transition">
                Sign Up
            </button>
        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
</div> <!-- Closing div -->

<script>
    document.addEventListener('DOMContentLoaded', function() {
        console.log('✅ Page loaded');

        const form = document.querySelector('form');
        const submitBtn = document.querySelector('button[type="submit"]');

        // Log form submission
        form.addEventListener('submit', function(e) {
            console.log('🚀 FORM SUBMIT TRIGGERED');
            console.log('Form valid:', form.checkValidity());

            // Check each required field
            const email = document.querySelector('[name="Input.Email"]').value;
            const password = document.querySelector('[name="Input.Password"]').value;
            const fullName = document.querySelector('[name="Input.FullName"]').value;
            const phone = document.querySelector('[name="Input.PhoneNumber"]').value;
            const terms = document.querySelector('[name="Input.TermsAccepted"]').checked;

            console.log('Email:', email);
            console.log('Password length:', password.length);
            console.log('Full Name:', fullName);
            console.log('Phone:', phone);
            console.log('Terms accepted:', terms);
        });

        // Add a test button that bypasses everything
        const testBtn = document.createElement('button');
        testBtn.textContent = '🧪 TEST SUBMIT (Force)';
        testBtn.type = 'button';
        testBtn.className = 'w-full bg-green-600 text-white font-bold py-3 rounded-md mt-4';
        testBtn.onclick = async function() {
            console.log('🧪 TEST BUTTON CLICKED');

            // Manually submit form data
            const formData = new FormData(form);
            try {
                const response = await fetch('', {
                    method: 'POST',
                    body: formData
                });
                console.log('Response status:', response.status);
                console.log('Response OK:', response.ok);

                if (response.redirected) {
                    console.log('✅ Form redirected to:', response.url);
                    window.location.href = response.url;
                } else {
                    console.log('❌ Form did not redirect');
                }
            } catch (error) {
                console.log('❌ Fetch error:', error);
            }
        };

        form.appendChild(testBtn);
    });
</script>